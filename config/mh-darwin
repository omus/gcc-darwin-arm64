# For 32b Hosts, the -mdynamic-no-pic ensures that the compiler executable is
# built without position-independent-code -- the usual default on Darwin.
# This speeds up compiles by 3-5%.

# Don't add it if the compiler doesn't also support -mno-dynamic-no-pic to
# undo it; since that is needed when PIC is forced.
DARWIN_MDYNAMIC_NO_PIC := \
`$(CC) -S -xc /dev/null -o /dev/null -mno-dynamic-no-pic 2>/dev/null \
   && echo -mdynamic-no-pic`

STAGE1_CFLAGS += $(DARWIN_MDYNAMIC_NO_PIC)

# Add -mdynamic-no-pic just to later stages unconditionally; we know it is
# built with gcc.
STAGE2_CFLAGS += -mdynamic-no-pic
STAGE3_CFLAGS += -mdynamic-no-pic
STAGE4_CFLAGS += -mdynamic-no-pic
